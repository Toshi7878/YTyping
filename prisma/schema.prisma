generator client {
  provider = "prisma-client-js"
  engineType = "library" // または "binary"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Result {
  id             Int @id @default(autoincrement())
  mapId          Int
  userId         Int
  lineResult     Json
  status         Json
  user           User @relation(fields: [userId], references: [id], onDelete: Cascade)
  map            Map  @relation(fields: [mapId], references: [id], onDelete: Cascade) // 追加されたリレーション
}
model Map {
  id             Int @id @default(autoincrement())
  videoId        String
  title          String
  creatorComment String
  tags           String[] //分ける
  creatorId      Int
  mapData        Json
  previewTime    String @default("0")
  difficulty     String @default("0.0")
  createdAt      DateTime @default(now())
  updatedAt      DateTime @default(now()) @updatedAt
  user           User @relation(fields: [creatorId], references: [id], onDelete: Cascade)
  result         Result[]
}


model User {
  id            Int             @id @default(autoincrement())
  name          String?         @unique
  email_hash    String          @unique
  image         String?
  createdAt     DateTime        @default(now())
  updatedAt     DateTime        @updatedAt
  maps          Map[]
  result        Result[]
}